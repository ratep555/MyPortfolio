<div class="container" style="margin-top: 150px; margin-bottom: 150px;">   
    <div class="text-center" *ngIf="count > 0 &&
    ((currentUser$ | async) && (currentUser$ | async)?.roleName !=='Admin')">
        <div id='chart_div' style='width: 53%; height: 300px;'>
            <app-charts></app-charts>
        </div> 
    </div>
        <div class="container mt-3 mb-5">   
            <table class="center table table-bordered table-striped table-condensed table-hover">
                <thead class="piki">
                    <tr>
                        <th>
                          Total Price of Purchase
                        </th>
                        <th>
                            {{totalPriceOfPurchase | number: '1.2-2'}} kn
                        </th>
                    </tr>
                    <tr>
                        <th>
                          Current Portfolio Market Value
                        </th>
                        <th>
                            {{totalMarketValue | number: '1.2-2'}} kn
                  </th>
                    </tr>
                    <tr>
                        <th>
                          Profit/Loss
                        </th>
                        <th>
                            {{ totalMarketValue - totalPriceOfPurchase | number: '1.2-2'}} kn
                        </th>
                    </tr>
                </thead>
                </table>
                <div class="form-inline pull-right">
                    <input (keyup.enter)="onSearch()" type="text" 
                    class="form-control mr-2" #search style="width: 300px;"  
                    placeholder="Search">
                    <button (click)="onSearch()" class="btn btn-info my-2">
                        <i class="fa fa-search mr-1" aria-hidden="true"></i>
                        Search</button>
                    <button (click)="onReset()" class="btn btn-primary ml-2">
                        <i class="fa fa-refresh mr-1" aria-hidden="true"></i>
                        Reset</button>
                </div>   
            <table class="table table-bordered table-striped table-condensed table-hover">
                <thead>
                  <tr style="color: black;">
                      <th>
                          Symbol
                      </th>              
                      <th>
                          Quantity
                      </th>                    
                     
                      <th>
                          Purchased
                      </th>
                      <th>
                          Purchased Value
                      </th>
                      <th>
                        Market
                    </th>
                      <th>
                        Market Value
                    </th>
                      <th>
                          Share
                      </th>
                      <th>
                          Yield
                      </th>
                      <th>
                      </th>              
                  </tr>
                      </thead>
                      <tbody>
              <tr *ngFor="let item of portfolioAccount" style="color: black;">
                 
                  <td>{{item.symbol}}</td>
                  <td>{{item.totalQuantity}}</td>
                  <td>{{item.averagePriceOfPurchase | number: '1.2-2'}} kn</td>
                 <td>{{item.totalPriceOfPurchasePerStock | number: '1.2-2'}} kn</td>
                  <td>{{item.currentPrice | number: '1.2-2'}} kn </td>
                  <td>{{item.totalMarketValuePerStock | number: '1.2-2'}} kn</td>
                  <td>{{item.portfolioPercentage | number : '1.2-2'}} % </td>
                  <td>{{(((item.totalQuantity * item.currentPrice) - (item.totalQuantity * item.averagePriceOfPurchase))
                       / (item.totalQuantity * item.averagePriceOfPurchase)) * 100 | number : '1.2-2'}} % </td>
                  <td>  
                      <div class="text-center">
                        <button routerLink="/usertransactions/buystock/{{item.stockId}}"
                        class="m-0 btn btn-success mr-1 d-inline">
                        Buy Stock</button>
                        <button routerLink="/usertransactions/sellstock/{{item.stockId}}"
                        class=" btn btn-danger mr-1 d-inline">
                        Sell Stock</button>
                        <button routerLink="/usertransactions/{{item.stockId}}" 
                        class="btn btn-info d-inline">
                        <i class="fa fa-info-circle mr-1"></i>Details</button>            
                      </div>
                </td>
              </tr>
                      </tbody>    
            </table>
            </div>            
    </div>
    
